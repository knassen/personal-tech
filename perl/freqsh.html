<!DOCTYPE HTML> 
<html lang="en">

<head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="shell script for computing frequencies">
    <base HREF="/personal-tech/perl/">
    <title>Shell Script Version of Frequency Counts</title>
</head>

<body>
<blockquote>

<h2>Frequency Counts Using a Shell Script</h2>

This shell script can generate frequencies and it includes options
for choosing the records per case and subsetting based on that (for a
hierarchical data file).

It depends on another shell script (printrec0), linked below.

<pre>
#! /bin/sh
#. Generate frequencies given a file, columns, and optional rec # and rec/case
case $# in
 0)   echo " ";
      echo " usage:   freq filename column(s) [r=record rc=records per case]" ;
      echo " example: freq test.dat 8-13 r=2 rc=5" ;
      echo " ";
      exit 0;;

# *)   echo " ";
#      echo " error:  ** syntax error/incorrect number of arguments **" ;
#      echo " usage:   freq filename column(s) [r=record rc=records per case]" ;
#      echo " example: freq test.dat 8-13 r=2 rc=5" ;
#      echo " ";
#      exit 1;;

 2)   echo " ";
      echo "freq of $1, column(s) $2";
      echo " ";
      echo "   freq value";
      echo " ";
      cut -c$2 $1 | sort | uniq -c &gt; /tmp/frtmp$$;
      cat /tmp/frtmp$$;
      awk 'BEGIN {print "-------------"}
                 {n += $1} 
             END { printf("   %d cases\n",n)}' /tmp/frtmp$$;
      rm -f /tmp/frtmp$$;;
     
 4)   echo " ";
      echo "freq of $1, column(s) $2, record $3, $4 records per case";
      echo " ";
      echo "   freq value";
      echo " ";
      awk -f <a href="printrec0.html">printrec0</a> $3 $4 $1 &gt; /tmp/frtmp2$$;
      cut -c$2 /tmp/frtmp2$$ | sort | uniq -c &gt; /tmp/frtmp$$;
      cat /tmp/frtmp$$;     
      awk 'BEGIN {print "-------------"}
                 {n += $1} 
             END { printf("   %d cases\n",n)}' /tmp/frtmp$$;
      rm -f /tmp/frtmp$$;
      rm -f /tmp/frtmp2$$;;
   
esac
echo " "
exit 0

</pre>
(Note: credit for this shell script goes to Nelson Martinez).

<hr style="height: 2px; width: 100%; margin-left:0px; margin-right:auto;">

<a href="../perl/freqperl.html"><img src="/personal-tech/gif/arrwback.gif" alt="">   Back to Frequency Count Page</a>
<p>
<span style="font size: 80%;">
Last modified: Sat Sep  6 17:21:22 EDT 2025
</span>

</blockquote>
</body>
</html>

